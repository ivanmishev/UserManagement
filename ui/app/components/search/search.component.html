<h1 class="text-center">User management</h1>

<div class="btn-group pull-right">
  <a (click)="createUserModal.open()" class="btn btn-default btn-lg">Create</a>
  <a (click)="updateUserModal.open()" class="btn btn-default btn-lg">Update</a>
  <a (click)="deleteUserModal.open()" class="btn btn-default btn-lg">Remove</a>
</div>

<div *ngIf="userResults">
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th class="sort-by-header" (click)="searchUsers('firstName')">First name<i class="fa fa-fw fa-sort-asc"></i></th>
      <th class="sort-by-header" (click)="searchUsers('lastName')">Last name<i class="fa fa-fw fa-sort-asc"></i></th>
      <th class="sort-by-header" (click)="searchUsers('email')">Email address<i class="fa fa-fw fa-sort-asc"></i></th>
      <th class="sort-by-header" (click)="searchUsers('birthDate')">Birth date<i class="fa fa-fw fa-sort-asc"></i></th>
    </tr>
    </thead>

    <tbody *ngFor="let res of userResults">
    <tr>
      <td>{{res.firstName}}</td>
      <td>{{res.lastName}}</td>
      <td>{{res.email}}</td>
      <td>{{res.birthDate | date}}</td>
    </tr>
    </tbody>
  </table>
</div>

<modal #createUserModal>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Create user:</h4>
  </modal-header>
  <modal-body>
    <form class="form-horizontal" (ngSubmit)="onSubmit()" #heroForm="ngForm">
      <fieldset>
        <div class="form-group">
          <label for="inputFirstName" class="col-lg-2 control-label">First name</label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="inputFirstName" placeholder="First name">
          </div>
        </div>
        <div class="form-group">
          <label for="inputLastName" class="col-lg-2 control-label">LastName</label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="inputLastName" placeholder="Last name">
          </div>
        </div>
        <div class="form-group">
          <label for="inputEmail" class="col-lg-2 control-label">Email</label>
          <div class="col-lg-10">
            <input type="email" class="form-control" id="inputEmail" placeholder="Email">
          </div>
        </div>
        <div class="form-group">
          <label for="inputBirthDate" class="col-lg-2 control-label">Birth Date</label>
          <div class="col-lg-10">
            <input type="date" class="form-control" id="inputBirthDate" placeholder="BirthDate">
          </div>
        </div>
        <div class="form-group">
        </div>
      </fieldset>
    </form>

  </modal-body>
  <modal-footer [show-default-buttons]="false">
    <div class="form-group">
      <button type="submit" class="btn btn-primary" (click)="createUser()">Save</button>
      <button type="reset" class="btn btn-default" (click)="createUserModal.close()">Cancel</button>
    </div>
  </modal-footer>
</modal>

<modal #updateUserModal>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Update user:</h4>
  </modal-header>
  <modal-body>
    <div *ngIf="userResults">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th>First name</th>
          <th>Last name</th>
          <th>Email address</th>
          <th>Birth date</th>
        </tr>
        </thead>

        <tbody *ngFor="let res of userResults">
        <tr>
          <td>{{res.firstName}}</td>
          <td>{{res.lastName}}</td>
          <td>{{res.email}}</td>
          <td>{{res.birthDate | date}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </modal-body>
  <modal-footer [show-default-buttons]="false">
    <button type="button" class="btn btn-primary" (click)="updateUser()">Save</button>
    <button type="button" class="btn btn-primary" (click)="updateUserModal.close()">Close</button>
  </modal-footer>
</modal>

<modal #deleteUserModal>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Delete users:</h4>
  </modal-header>
  <modal-body>
    <div *ngIf="userResults">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th>First name</th>
          <th>Last name</th>
          <th>Email address</th>
          <th>Birth date</th>
          <th>Delete</th>
        </tr>
        </thead>

        <tbody *ngFor="let res of userResults">
        <tr>
          <td>{{res.firstName}}</td>
          <td>{{res.lastName}}</td>
          <td>{{res.email}}</td>
          <td>{{res.birthDate | date}}</td>
          <td>
            <input type="checkbox">
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </modal-body>
  <modal-footer [show-default-buttons]="false">
    <button type="button" class="btn btn-primary" (click)="deleteUsers(userResults)">Delete</button>
    <button type="button" class="btn btn-primary" (click)="deleteUserModal.close()">Close</button>
  </modal-footer>
</modal>
